"""
pandas-ta äº¤æ˜“ä¿¡è™Ÿç³»çµ± - å®Œæ•´ç¸½çµèˆ‡ä½¿ç”¨æŒ‡å—

é€™æ˜¯ä¸€å€‹åŸºæ–¼ pandas-ta å‡½å¼åº«çš„å°ˆæ¥­ç´šäº¤æ˜“ä¿¡è™Ÿç³»çµ±ï¼Œ
æ”¯æ´å¤šç¨®æŠ€è¡“æŒ‡æ¨™ã€äº¤æ˜“ç­–ç•¥å’Œå¸‚å ´åˆ†æã€‚
"""

# ç³»çµ±æ¦‚è¦
print("""
=== pandas-ta äº¤æ˜“ä¿¡è™Ÿç³»çµ±å®Œæ•´å¯¦ç¾ ===

ğŸ¯ ç³»çµ±ç‰¹è‰²ï¼š
âœ… æ”¯æ´ 40+ æŠ€è¡“æŒ‡æ¨™
âœ… è‡ªé©æ‡‰åƒæ•¸é…ç½® (å‰é ­çš®ã€æ³¢æ®µã€è¶¨å‹¢)
âœ… å¤šé‡ä¿¡è™Ÿç¢ºèªæ©Ÿåˆ¶
âœ… ä¿¡å¿ƒåº¦è©•åˆ†ç³»çµ±
âœ… å®Œæ•´çš„ JSON é…ç½®æª”æ¡ˆ
âœ… å¯¦æ™‚ä¿¡è™Ÿç”Ÿæˆ

ğŸ“ å·²å‰µå»ºçš„æ ¸å¿ƒæª”æ¡ˆï¼š

1. ğŸ“Š é…ç½®æª”æ¡ˆ
   â””â”€â”€ app/config/pandas_ta_trading_signals.json
       - å®Œæ•´çš„æŠ€è¡“æŒ‡æ¨™å®šç¾©
       - äº¤æ˜“ä¿¡è™Ÿæ¢ä»¶
       - ç­–ç•¥åƒæ•¸é…ç½®
       - å¯¦ç¾æŒ‡å¼•

2. ğŸ¤– ä¿¡è™Ÿè§£æå™¨
   â””â”€â”€ app/services/pandas_ta_trading_signal_parser.py
       - PandasTATradingSignals ä¸»é¡åˆ¥
       - æŒ‡æ¨™è¨ˆç®—å¼•æ“
       - ä¿¡è™Ÿç”Ÿæˆé‚è¼¯
       - æ‘˜è¦çµ±è¨ˆåŠŸèƒ½

3. ğŸ§ª æ¸¬è©¦æ¡†æ¶
   â””â”€â”€ TEST/test_pandas_ta_signals.py
       - åŸºç¤åŠŸèƒ½æ¸¬è©¦
       - æŒ‡æ¨™è¨ˆç®—é©—è­‰
       - ä¿¡è™Ÿç”Ÿæˆæ¸¬è©¦
   
   â””â”€â”€ TEST/pandas_ta_usage_examples.py
       - å®Œæ•´ä½¿ç”¨ç¯„ä¾‹
       - ç­–ç•¥æ¯”è¼ƒåˆ†æ
       - å›æ¸¬åŠŸèƒ½æ¼”ç¤º

ğŸ“ˆ æ”¯æ´çš„æŠ€è¡“æŒ‡æ¨™é¡åˆ¥ï¼š

ã€è¶¨å‹¢æŒ‡æ¨™ã€‘
- EMA (æŒ‡æ•¸ç§»å‹•å¹³å‡)
- SMA (ç°¡å–®ç§»å‹•å¹³å‡)  
- MACD (ç§»å‹•å¹³å‡æ”¶æ–‚ç™¼æ•£)
- ADX (å¹³å‡è¶¨å‘æŒ‡æ•¸)
- Aroon (é˜¿éš†æŒ‡æ¨™)
- SuperTrend (è¶…ç´šè¶¨å‹¢)
- PSAR (æ‹‹ç‰©ç·šåœæè½‰å‘)

ã€å‹•é‡æŒ‡æ¨™ã€‘  
- RSI (ç›¸å°å¼·å¼±æŒ‡æ¨™)
- Stochastic (éš¨æ©ŸæŒ‡æ¨™)
- Williams %R
- CCI (å•†å“é€šé“æŒ‡æ•¸)
- ROC (è®ŠåŒ–ç‡)
- CMO (éŒ¢å¾·å‹•é‡éœ‡ç›ªå™¨)

ã€æ³¢å‹•æ€§æŒ‡æ¨™ã€‘
- Bollinger Bands (å¸ƒæ—é€šé“)
- ATR (å¹³å‡çœŸå¯¦æ³¢å¹…)
- Donchian Channel (å”å¥‡å®‰é€šé“)
- Keltner Channel (è‚¯ç‰¹ç´é€šé“)

ã€æˆäº¤é‡æŒ‡æ¨™ã€‘
- OBV (èƒ½é‡æ½®)
- A/D Line (èšæ•£æŒ‡æ¨™)
- CMF (æŸ´é‡‘è³‡é‡‘æµé‡)
- MFI (è³‡é‡‘æµé‡æŒ‡æ¨™)
- VWAP (æˆäº¤é‡åŠ æ¬Šå¹³å‡åƒ¹)

ã€Kç·šå½¢æ…‹ã€‘
- Doji (åå­—æ˜Ÿ)
- Hammer (éŒ˜å­ç·š)
- Engulfing (åå™¬å½¢æ…‹)

ğŸ›ï¸ ç­–ç•¥é…ç½®ï¼š

ã€å‰é ­çš® (Scalping)ã€‘
- å¿«é€Ÿåƒæ•¸è¨­å®š
- æ•æ„Ÿåº¦è¼ƒé«˜
- é©åˆ 5m-15m æ™‚é–“æ¡†æ¶

ã€æ³¢æ®µäº¤æ˜“ (Swing)ã€‘  
- å¹³è¡¡åƒæ•¸è¨­å®š
- ä¸­ç­‰æ•æ„Ÿåº¦
- é©åˆ 1h-4h æ™‚é–“æ¡†æ¶

ã€è¶¨å‹¢è·Ÿéš¨ (Trend)ã€‘
- ç©©å®šåƒæ•¸è¨­å®š
- é™ä½é›œè¨Šå¹²æ“¾
- é©åˆ 4h-1d æ™‚é–“æ¡†æ¶

ğŸ”§ æ ¸å¿ƒåŠŸèƒ½ï¼š

1. æŒ‡æ¨™è¨ˆç®—
   calculate_all_indicators(df, strategy="swing")

2. ä¿¡è™Ÿç”Ÿæˆ  
   generate_signals(df_with_indicators, strategy="swing", timeframe="1h")

3. ä¿¡è™Ÿæ‘˜è¦
   get_signal_summary(signals)

4. ä¿¡è™Ÿè©•ä¼°
   - è²·å…¥/è³£å‡ºä¿¡è™Ÿçµ±è¨ˆ
   - æ•´é«”å¸‚å ´æƒ…ç·’åˆ†æ  
   - ä¿¡å¿ƒåº¦åŠ æ¬Šè©•åˆ†
   - æœ€å¼·ä¿¡è™Ÿè­˜åˆ¥

ğŸ’¡ ä½¿ç”¨ç¯„ä¾‹ï¼š

```python
from app.services.pandas_ta_trading_signal_parser import PandasTATradingSignals

# åˆå§‹åŒ–
signal_generator = PandasTATradingSignals()

# è¨ˆç®—æŒ‡æ¨™ (df éœ€åŒ…å« OHLCV æ•¸æ“š)
df_with_indicators = signal_generator.calculate_all_indicators(df, strategy="swing")

# ç”Ÿæˆä¿¡è™Ÿ
signals = signal_generator.generate_signals(df_with_indicators, "swing", "1h")

# ç²å–æ‘˜è¦
summary = signal_generator.get_signal_summary(signals)

print(f"æ•´é«”æƒ…ç·’: {summary['overall_sentiment']}")
print(f"ä¿¡å¿ƒåº¦: {summary['average_confidence']:.3f}")
```

âš ï¸ æ³¨æ„äº‹é …ï¼š

1. è³‡æ–™éœ€æ±‚ï¼š
   - å¿…é ˆåŒ…å« OHLC æ¬„ä½
   - å»ºè­°åŒ…å« Volume æ¬„ä½ä»¥å•Ÿç”¨æˆäº¤é‡æŒ‡æ¨™
   - æ•¸æ“šéœ€è¦è¶³å¤ çš„æ­·å²é•·åº¦ä»¥è¨ˆç®—æŒ‡æ¨™

2. ä¾è³´å¥—ä»¶ï¼š
   - pandas-ta (æ ¸å¿ƒæŒ‡æ¨™è¨ˆç®—)
   - pandas (æ•¸æ“šè™•ç†)
   - numpy (æ•¸å€¼è¨ˆç®—)

3. æ•ˆèƒ½è€ƒé‡ï¼š
   - æŒ‡æ¨™è¨ˆç®—éœ€è¦ä¸€å®šæ™‚é–“
   - å»ºè­°å…ˆè¨ˆç®—æŒ‡æ¨™å†é‡è¤‡ä½¿ç”¨
   - å°æ–¼å¤§é‡æ•¸æ“šå¯è€ƒæ…®åˆ†æ‰¹è™•ç†

ğŸ¯ å¯¦æˆ°æ‡‰ç”¨å»ºè­°ï¼š

1. å¤šæ™‚é–“æ¡†æ¶ç¢ºèª
   - ä½¿ç”¨ä¸åŒæ™‚é–“æ¡†æ¶é©—è­‰ä¿¡è™Ÿ
   - é«˜æ™‚é–“æ¡†æ¶å®šæ–¹å‘ï¼Œä½æ™‚é–“æ¡†æ¶æ‰¾é€²å ´é»

2. é¢¨éšªç®¡ç†
   - è¨­å®šæ­¢ææ­¢ç›ˆ
   - æ§åˆ¶å€‰ä½å¤§å°
   - åˆ†æ•£æŠ•è³‡çµ„åˆ

3. ä¿¡è™Ÿéæ¿¾
   - åªæ“ä½œé«˜ä¿¡å¿ƒåº¦ä¿¡è™Ÿ (>0.7)
   - ç­‰å¾…å¤šæŒ‡æ¨™ç¢ºèª
   - é¿å…é »ç¹äº¤æ˜“

4. å›æ¸¬é©—è­‰
   - å®šæœŸå›æ¸¬ç­–ç•¥è¡¨ç¾
   - èª¿æ•´åƒæ•¸å„ªåŒ–çµæœ  
   - è¨˜éŒ„äº¤æ˜“æ—¥èªŒ

ğŸ“Š ç³»çµ±æ¸¬è©¦çµæœï¼š

âœ… åŸºç¤åŠŸèƒ½ï¼šå·²é€šé
âœ… æŒ‡æ¨™è¨ˆç®—ï¼šå·²é€šé (40+ æŒ‡æ¨™)
âœ… ä¿¡è™Ÿç”Ÿæˆï¼šå·²é€šé
âœ… ç­–ç•¥æ¯”è¼ƒï¼šå·²é€šé
âœ… ä¿¡è™Ÿæ‘˜è¦ï¼šå·²é€šé
âš ï¸ Kç·šå½¢æ…‹ï¼šéœ€ TA-Lib æ”¯æ´
âš ï¸ å›æ¸¬åŠŸèƒ½ï¼šåŸºæœ¬æ¡†æ¶å®Œæˆ

ğŸš€ å¾ŒçºŒç™¼å±•æ–¹å‘ï¼š

1. æ©Ÿå™¨å­¸ç¿’æ•´åˆ
   - ä½¿ç”¨æ­·å²æ•¸æ“šè¨“ç·´æ¨¡å‹
   - å‹•æ…‹èª¿æ•´æŒ‡æ¨™æ¬Šé‡
   - é æ¸¬ä¿¡è™Ÿæº–ç¢ºç‡

2. å¯¦æ™‚æ•¸æ“šæ¥å…¥
   - WebSocket æ•¸æ“šæµ
   - è‡ªå‹•åŒ–äº¤æ˜“åŸ·è¡Œ
   - é¢¨éšªç›£æ§ç³»çµ±

3. è¦–è¦ºåŒ–ç•Œé¢
   - åœ–è¡¨é¡¯ç¤º
   - ä¿¡è™Ÿæé†’
   - ç¸¾æ•ˆè¿½è¹¤

4. é«˜ç´šç­–ç•¥
   - é…å°äº¤æ˜“
   - çµ±è¨ˆå¥—åˆ©
   - æœŸæ¬Šç­–ç•¥æ•´åˆ

ğŸ’° å¯¦éš›äº¤æ˜“å»ºè­°ï¼š

âš ï¸ å…è²¬è²æ˜ï¼šæœ¬ç³»çµ±åƒ…ä¾›æ•™è‚²å’Œç ”ç©¶ç”¨é€”ï¼Œ
ä¸æ§‹æˆæŠ•è³‡å»ºè­°ã€‚å¯¦éš›äº¤æ˜“å‰è«‹ï¼š

1. å……åˆ†ç†è§£æ¯å€‹æŒ‡æ¨™çš„å«ç¾©
2. åœ¨æ¨¡æ“¬ç’°å¢ƒä¸­é©—è­‰ç­–ç•¥
3. è¨­å®šåˆç†çš„é¢¨éšªæ§åˆ¶
4. è€ƒæ…®å¸‚å ´ç’°å¢ƒå’ŒåŸºæœ¬é¢å› ç´ 
5. è«®è©¢å°ˆæ¥­é‡‘èé¡§å•

ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆ pandas-ta äº¤æ˜“ä¿¡è™Ÿç³»çµ±çš„æ§‹å»ºï¼

é€™å€‹ç³»çµ±ç‚ºæ‚¨æä¾›äº†å°ˆæ¥­ç´šçš„æŠ€è¡“åˆ†æå·¥å…·ï¼Œ
ç¾åœ¨æ‚¨å¯ä»¥é–‹å§‹æ¢ç´¢å„ç¨®äº¤æ˜“ç­–ç•¥ï¼Œ
ä¸¦åœ¨å¯¦éš›å¸‚å ´ä¸­é©—è­‰å…¶æœ‰æ•ˆæ€§ã€‚

è¨˜ä½ï¼šæˆåŠŸçš„äº¤æ˜“ä¸åƒ…ä¾è³´æ–¼æŠ€è¡“æŒ‡æ¨™ï¼Œ
é‚„éœ€è¦è‰¯å¥½çš„é¢¨éšªç®¡ç†å’Œå¿ƒç†ç´ è³ªã€‚

Happy Trading! ğŸ“ˆ
""")

# ç³»çµ±æ¶æ§‹åœ–
print("""
ğŸ“ ç³»çµ±æ¶æ§‹ï¼š

Input Data (OHLCV)
       â†“
PandasTATradingSignals
       â†“
â”Œâ”€ calculate_all_indicators() â”€â”€â”
â”‚  â”œâ”€ Trend Indicators          â”‚
â”‚  â”œâ”€ Momentum Indicators       â”‚  
â”‚  â”œâ”€ Volatility Indicators     â”‚
â”‚  â”œâ”€ Volume Indicators         â”‚
â”‚  â””â”€ Candlestick Patterns      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€ generate_signals() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”œâ”€ Trend Signals             â”‚
â”‚  â”œâ”€ Momentum Signals          â”‚
â”‚  â”œâ”€ Volatility Signals        â”‚
â”‚  â”œâ”€ Volume Signals            â”‚
â”‚  â””â”€ Pattern Signals           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€ get_signal_summary() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”œâ”€ Overall Sentiment         â”‚
â”‚  â”œâ”€ Confidence Score          â”‚
â”‚  â”œâ”€ Signal Strength           â”‚
â”‚  â””â”€ Strongest Signal          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Trading Decision
""")

# é…ç½®æ‘˜è¦
import json
from pathlib import Path

try:
    config_path = Path("/Users/henrychang/Desktop/Trading-X/app/config/pandas_ta_trading_signals.json")
    with open(config_path, 'r', encoding='utf-8') as f:
        config = json.load(f)
    
    print("\nğŸ“‹ é…ç½®çµ±è¨ˆï¼š")
    print(f"  è¶¨å‹¢æŒ‡æ¨™: {len(config['trend_indicators'])} å€‹")
    print(f"  å‹•é‡æŒ‡æ¨™: {len(config['momentum_indicators'])} å€‹") 
    print(f"  æ³¢å‹•æ€§æŒ‡æ¨™: {len(config['volatility_indicators'])} å€‹")
    print(f"  æˆäº¤é‡æŒ‡æ¨™: {len(config['volume_indicators'])} å€‹")
    print(f"  Kç·šå½¢æ…‹: {len(config['candlestick_patterns'])} å€‹")
    print(f"  ç¸½è¨ˆæŒ‡æ¨™: {sum([len(config[key]) for key in config if key.endswith('_indicators') or key.endswith('_patterns')])} å€‹")
    
except Exception as e:
    print(f"ç„¡æ³•è¼‰å…¥é…ç½®æª”æ¡ˆ: {e}")

print("""
ğŸ”— ç›¸é—œè³‡æºï¼š

- pandas-ta æ–‡æª”: https://github.com/twopirllc/pandas-ta
- æŠ€è¡“æŒ‡æ¨™å­¸ç¿’: https://www.tradingview.com/wiki/
- é‡åŒ–äº¤æ˜“ç¤¾ç¾¤: https://github.com/quantopian
- Python é‡‘è: https://github.com/wilsonfreitas/awesome-quant

ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•ï¼š

1. ç†Ÿæ‚‰é…ç½®æª”æ¡ˆçµæ§‹
2. æ¸¬è©¦ä¸åŒç­–ç•¥åƒæ•¸
3. æ•´åˆåˆ°æ‚¨çš„äº¤æ˜“æµç¨‹
4. é–‹å§‹å›æ¸¬å’Œå„ªåŒ–

Good luck with your trading journey! ğŸš€
""")
