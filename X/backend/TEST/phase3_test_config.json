{
  "phase3_test_configuration": {
    "description": "Phase3跨階段整合測試的數據規則和參數配置",
    "version": "1.0",
    "created_at": "2025-08-10T23:30:00Z",
    
    "end_to_end_data_flow": {
      "description": "端到端數據流完整性測試規則",
      "success_criteria": {
        "data_integrity_threshold": 100.0,
        "processing_time_limit_ms": 200.0,
        "stage_completion_minimum": 4
      },
      "processing_stages": [
        {"name": "websocket_reception", "target_time_ms": 5},
        {"name": "phase1_signal_generation", "target_time_ms": 30},
        {"name": "phase2_strategy_processing", "target_time_ms": 50},
        {"name": "phase3_integration", "target_time_ms": 20}
      ],
      "data_validation_rules": {
        "required_fields": ["signal_id", "timestamp", "processing_stage", "data_integrity"],
        "data_loss_tolerance": 0.0,
        "processing_order_strict": true
      }
    },
    
    "error_handling_recovery": {
      "description": "錯誤處理和恢復機制測試規則",
      "success_criteria": {
        "recovery_success_rate_threshold": 95.0,
        "recovery_time_limit_ms": 100.0
      },
      "error_scenarios": [
        {
          "name": "WebSocket連接中斷",
          "error_type": "connection_lost",
          "expected_recovery": "auto_reconnect",
          "max_recovery_time_ms": 50
        },
        {
          "name": "Phase1信號生成異常",
          "error_type": "signal_generation_failure",
          "expected_recovery": "fallback_strategy",
          "max_recovery_time_ms": 80
        },
        {
          "name": "Phase2策略計算錯誤",
          "error_type": "strategy_calculation_error",
          "expected_recovery": "error_isolation",
          "max_recovery_time_ms": 100
        }
      ]
    },
    
    "load_stress_performance": {
      "description": "負載壓力性能測試規則",
      "success_criteria": {
        "success_rate_threshold": 80.0,
        "performance_degradation_limit": 20.0
      },
      "load_scenarios": [
        {
          "name": "正常負載",
          "concurrent_signals": 10,
          "duration_seconds": 5,
          "expected_success_rate": 95.0
        },
        {
          "name": "高負載",
          "concurrent_signals": 50,
          "duration_seconds": 10,
          "expected_success_rate": 85.0
        },
        {
          "name": "極限負載",
          "concurrent_signals": 100,
          "duration_seconds": 15,
          "expected_success_rate": 70.0
        }
      ]
    }
  }
}
