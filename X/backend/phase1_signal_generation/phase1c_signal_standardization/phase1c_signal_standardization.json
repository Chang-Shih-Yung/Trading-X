{
  "strategy_dependency_graph": {
    "strategy_name": "Phase1C 信號標準化引擎（生產級）",
    "description": "統一信號格式化、品質評分、優先級排序與輸出標準化系統",
    "version": "2.0.0",
    "dependencies": {
      "core_dependencies": [
        "phase1b_volatility_adaptation",
        "indicator_dependency_graph",
        "pandas_ta_indicators"
      ],
      "external_libraries": ["numpy", "pandas", "logging", "datetime"],
      "signal_sources": [
        "phase1b_volatility_regime_signals",
        "technical_indicator_signals",
        "volume_confirmation_signals"
      ],
      "cross_module_dependencies": [
        "phase3_market_analyzer",
        "unified_signal_candidate_pool"
      ]
    },
    "inherits_configuration_from": "indicator_dependency_graph",
    "uses_timeframes": "configurable_parameters.timeframes",
    "input_format_compatibility": {
      "expects_from_phase1b": "{symbol}_{timeframe}_volatility_regime",
      "expects_from_indicator_graph": "{symbol}_{timeframe}_{indicator_name}",
      "processes_multiple_signal_types": true,
      "requires_quality_scoring": true
    },
    "computation_flow": {
      "layer_1_signal_collection": {
        "description": "信號收集與初步驗證層",
        "dependencies": [],
        "operations": {
          "volatility_signal_collection": {
            "input": "phase1b_volatility_adaptation_signals",
            "signal_types": [
              "VOLATILITY_BREAKOUT",
              "VOLATILITY_MEAN_REVERSION",
              "VOLATILITY_REGIME_CHANGE"
            ],
            "validation": {
              "signal_strength_range": "0.0-1.0",
              "execution_priority_check": "HIGH|MEDIUM|LOW",
              "timestamp_validation": "ISO_datetime_format",
              "source_verification": "phase1b_volatility_adaptation_v2"
            },
            "output": "validated_volatility_signals",
            "computation_time_ms": 3
          },
          "technical_indicator_signal_collection": {
            "input": "indicator_dependency_graph_outputs",
            "indicators": [
              "RSI_signals",
              "MACD_signals",
              "BB_position_signals",
              "volume_confirmation_signals"
            ],
            "quality_filtering": {
              "minimum_quality_score": 0.6,
              "multi_indicator_confirmation": true,
              "data_sync_verification": "layer_-1_data_sync"
            },
            "output": "validated_technical_signals",
            "computation_time_ms": 5
          },
          "signal_integrity_check": {
            "input": "all_collected_signals",
            "checks": {
              "timestamp_alignment": "所有信號時間戳對齊檢查",
              "duplicate_detection": "重複信號識別與去除",
              "signal_conflict_detection": "矛盾信號識別",
              "data_completeness": "信號數據完整性檢查"
            },
            "conflict_resolution": {
              "priority_based": "higher_priority_signal_wins",
              "quality_based": "higher_quality_score_wins",
              "timestamp_based": "latest_signal_wins"
            },
            "output": "integrity_verified_signals",
            "computation_time_ms": 4
          }
        }
      },
      "layer_2_signal_standardization": {
        "description": "信號標準化與格式統一層",
        "dependencies": ["layer_1_signal_collection"],
        "operations": {
          "signal_format_standardization": {
            "input": "integrity_verified_signals",
            "standardization": {
              "naming_convention": "{symbol}_{timeframe}_{strategy}_{signal_type}",
              "signal_strength_normalization": "0.0-1.0 統一範圍",
              "confidence_score_calculation": "基於多因子品質評分",
              "execution_priority_mapping": "HIGH/MEDIUM/LOW 標準化"
            },
            "unified_format": {
              "signal_id": "unique_identifier",
              "symbol": "trading_pair",
              "timeframe": "analysis_timeframe",
              "strategy": "signal_generation_strategy",
              "signal_type": "signal_category",
              "signal_strength": "0.0-1.0",
              "confidence_score": "0.0-1.0",
              "execution_priority": "HIGH|MEDIUM|LOW",
              "timestamp": "ISO_datetime",
              "source": "strategy_module_version"
            },
            "output": "standardized_signals",
            "computation_time_ms": 6
          },
          "quality_score_enhancement": {
            "input": "standardized_signals",
            "enhancement_factors": {
              "multi_timeframe_confirmation": {
                "enabled": true,
                "weight": 0.25,
                "description": "多時間框架確認加成"
              },
              "volume_confirmation": {
                "enabled": true,
                "weight": 0.2,
                "description": "成交量確認加成"
              },
              "technical_convergence": {
                "enabled": true,
                "weight": 0.25,
                "description": "技術指標收斂確認"
              },
              "market_sentiment_alignment": {
                "enabled": true,
                "weight": 0.15,
                "description": "市場情緒一致性"
              },
              "historical_accuracy": {
                "enabled": true,
                "weight": 0.15,
                "description": "歷史準確率加權"
              }
            },
            "quality_calculation": {
              "base_score": "original_signal_quality",
              "enhancement_multiplier": "weighted_sum_of_factors",
              "final_score": "min(1.0, base_score * enhancement_multiplier)",
              "confidence_boost": "quality_score_based_confidence_adjustment"
            },
            "output": "enhanced_quality_signals",
            "computation_time_ms": 8
          },
          "signal_metadata_enrichment": {
            "input": "enhanced_quality_signals",
            "metadata": {
              "market_context": {
                "current_volatility": "absolute_volatility_level",
                "volatility_percentile": "timeframe_specific_percentile",
                "market_activity_level": "HIGH|NORMAL|LOW",
                "trading_session": "ASIAN|EUROPEAN|AMERICAN|OVERLAP"
              },
              "risk_metrics": {
                "signal_risk_level": "LOW|MEDIUM|HIGH",
                "recommended_position_size": "volatility_adjusted_size",
                "stop_loss_suggestion": "atr_based_stop_loss",
                "take_profit_suggestion": "risk_reward_optimized"
              },
              "execution_guidance": {
                "optimal_execution_timeframe": "strategy_recommended_timeframe",
                "execution_conditions": "market_state_requirements",
                "contraindications": "avoid_execution_conditions"
              }
            },
            "output": "enriched_metadata_signals",
            "computation_time_ms": 5
          }
        }
      },
      "layer_3_signal_prioritization": {
        "description": "信號優先級排序與篩選層",
        "dependencies": ["layer_2_signal_standardization"],
        "operations": {
          "multi_dimensional_scoring": {
            "input": "enriched_metadata_signals",
            "scoring_dimensions": {
              "signal_strength": {
                "weight": 0.3,
                "range": "0.0-1.0",
                "description": "信號本身強度"
              },
              "confidence_score": {
                "weight": 0.25,
                "range": "0.0-1.0",
                "description": "信號可信度評分"
              },
              "execution_priority": {
                "weight": 0.2,
                "mapping": { "HIGH": 1.0, "MEDIUM": 0.6, "LOW": 0.3 },
                "description": "執行優先級權重"
              },
              "market_timing": {
                "weight": 0.15,
                "factors": [
                  "volatility_alignment",
                  "session_activity",
                  "volume_confirmation"
                ],
                "description": "市場時機適配度"
              },
              "risk_reward_ratio": {
                "weight": 0.1,
                "calculation": "expected_profit / expected_risk",
                "description": "風險報酬比評估"
              }
            },
            "composite_score": "weighted_sum_of_dimensions",
            "output": "multi_dimensional_scored_signals",
            "computation_time_ms": 7
          },
          "signal_ranking_algorithm": {
            "input": "multi_dimensional_scored_signals",
            "ranking_method": "composite_score_descending",
            "tie_breaking": {
              "primary": "higher_confidence_score",
              "secondary": "higher_signal_strength",
              "tertiary": "latest_timestamp"
            },
            "ranking_categories": {
              "tier_1_signals": "composite_score >= 0.8",
              "tier_2_signals": "0.6 <= composite_score < 0.8",
              "tier_3_signals": "0.4 <= composite_score < 0.6",
              "filtered_signals": "composite_score < 0.4"
            },
            "output": "ranked_signal_tiers",
            "computation_time_ms": 4
          },
          "signal_filtering_rules": {
            "input": "ranked_signal_tiers",
            "filtering_criteria": {
              "minimum_quality_threshold": 0.6,
              "maximum_signals_per_symbol": 3,
              "maximum_signals_per_timeframe": 5,
              "signal_diversity_requirement": "different_signal_types_preferred",
              "temporal_filtering": "avoid_signals_within_5min"
            },
            "filtering_logic": {
              "quality_filter": "remove_signals_below_threshold",
              "quantity_filter": "keep_top_n_per_category",
              "diversity_filter": "prefer_complementary_signals",
              "temporal_filter": "remove_too_recent_duplicates"
            },
            "output": "filtered_high_quality_signals",
            "computation_time_ms": 3
          }
        }
      },
      "layer_4_output_generation": {
        "description": "最終輸出生成與分發層",
        "dependencies": ["layer_3_signal_prioritization"],
        "operations": {
          "standardized_output_formatting": {
            "input": "filtered_high_quality_signals",
            "output_formats": {
              "unified_signal_format": {
                "structure": "standardized_trading_signal",
                "destination": "unified_signal_candidate_pool",
                "format": "json_structured"
              },
              "execution_ready_format": {
                "structure": "execution_optimized_signal",
                "destination": "trading_execution_engine",
                "format": "minimal_latency_format"
              },
              "analysis_format": {
                "structure": "detailed_analysis_signal",
                "destination": "signal_analysis_dashboard",
                "format": "comprehensive_metadata"
              }
            },
            "output": "multi_format_signals",
            "computation_time_ms": 5
          },
          "signal_distribution": {
            "input": "multi_format_signals",
            "distribution_channels": {
              "primary_channel": {
                "destination": "unified_signal_candidate_pool",
                "priority": "immediate",
                "format": "unified_signal_format"
              },
              "execution_channel": {
                "destination": "trading_execution_engine",
                "priority": "high",
                "format": "execution_ready_format",
                "filtering": "tier_1_signals_only"
              },
              "monitoring_channel": {
                "destination": "signal_performance_monitor",
                "priority": "normal",
                "format": "analysis_format"
              },
              "backup_channel": {
                "destination": "signal_archive_storage",
                "priority": "low",
                "format": "comprehensive_backup"
              }
            },
            "distribution_logic": {
              "tier_1_signals": "all_channels",
              "tier_2_signals": "primary_and_monitoring_channels",
              "tier_3_signals": "monitoring_and_backup_channels"
            },
            "output": "distributed_signals",
            "computation_time_ms": 3
          },
          "performance_metrics_logging": {
            "input": "distributed_signals",
            "metrics": {
              "signal_generation_metrics": {
                "total_signals_processed": "count",
                "signals_by_tier": "tier_distribution",
                "average_quality_score": "mean_quality",
                "processing_time": "total_computation_time"
              },
              "quality_metrics": {
                "multi_confirmation_rate": "percentage_with_multiple_confirmations",
                "average_confidence_score": "mean_confidence",
                "signal_diversity_index": "shannon_entropy_of_signal_types"
              },
              "performance_metrics": {
                "computation_time_by_layer": "layer_timing_breakdown",
                "memory_usage": "peak_memory_consumption",
                "cache_hit_rate": "signal_processing_cache_efficiency"
              }
            },
            "logging_destinations": {
              "performance_database": "structured_metrics",
              "monitoring_dashboard": "real_time_kpis",
              "log_files": "detailed_trace_logs"
            },
            "output": "performance_logs",
            "computation_time_ms": 2
          }
        }
      }
    },
    "signal_output_format": {
      "format_compatibility": {
        "naming_convention": "{symbol}_{timeframe}_{strategy}_{signal_type}",
        "inherits_from": "indicator_dependency_graph_v2",
        "output_standardization": "unified_signal_format_v2"
      },
      "standardized_trading_signal": {
        "signal_id": "unique_identifier_uuid",
        "symbol": "trading_pair (e.g., BTCUSDT)",
        "timeframe": "analysis_timeframe (e.g., 1m, 5m, 15m, 1h)",
        "strategy": "signal_generation_strategy (e.g., volatility_adaptation, technical_convergence)",
        "signal_type": "BREAKOUT | MEAN_REVERSION | REGIME_CHANGE | TECHNICAL_CONVERGENCE",
        "signal_strength": "0.0-1.0 (標準化信號強度)",
        "confidence_score": "0.0-1.0 (多因子品質評分)",
        "execution_priority": "HIGH | MEDIUM | LOW",
        "composite_score": "0.0-1.0 (多維度綜合評分)",
        "tier_classification": "TIER_1 | TIER_2 | TIER_3",
        "market_context": {
          "current_volatility": "absolute_volatility_value",
          "volatility_percentile": "0.0-1.0 (timeframe_specific)",
          "market_activity_level": "HIGH | NORMAL | LOW",
          "trading_session": "ASIAN | EUROPEAN | AMERICAN | OVERLAP",
          "volume_confirmation": "true | false",
          "multi_timeframe_alignment": "true | false"
        },
        "risk_metrics": {
          "signal_risk_level": "LOW | MEDIUM | HIGH",
          "recommended_position_size": "0.0-1.0 (as_fraction_of_capital)",
          "stop_loss_percentage": "percentage_based_on_atr",
          "take_profit_percentage": "risk_reward_optimized",
          "risk_reward_ratio": "expected_profit_to_risk_ratio"
        },
        "execution_guidance": {
          "optimal_execution_timeframe": "recommended_timeframe",
          "execution_conditions": ["condition_1", "condition_2"],
          "contraindications": ["avoid_condition_1", "avoid_condition_2"],
          "execution_window": "optimal_time_window_minutes"
        },
        "quality_indicators": {
          "multi_confirmation_status": "CONFIRMED | PARTIAL | SINGLE",
          "technical_convergence": "true | false",
          "volume_alignment": "true | false",
          "sentiment_alignment": "true | false",
          "historical_accuracy": "0.0-1.0 (based_on_historical_performance)"
        },
        "metadata": {
          "timestamp": "ISO_datetime",
          "source": "phase1c_signal_standardization_v2",
          "processing_version": "2.0.0",
          "data_sources": ["source_1", "source_2"],
          "computation_time_ms": "total_processing_time"
        }
      }
    },
    "performance_targets": {
      "total_computation_time_ms": 40,
      "layered_processing_times": {
        "layer_1_signal_collection": "12ms",
        "layer_2_standardization": "19ms",
        "layer_3_prioritization": "14ms",
        "layer_4_output_generation": "10ms"
      },
      "signal_processing_capacity": "1000+ signals per batch",
      "quality_enhancement_effectiveness": "> 95%",
      "signal_standardization_accuracy": "> 99%",
      "multi_format_output_generation": "< 5ms",
      "memory_efficiency": "< 100MB peak usage"
    },
    "integration_points": {
      "feeds_to": [
        "unified_signal_candidate_pool",
        "trading_execution_engine",
        "signal_performance_monitor",
        "signal_analysis_dashboard"
      ],
      "receives_from": [
        "phase1b_volatility_adaptation",
        "indicator_dependency_graph",
        "pandas_ta_indicators"
      ],
      "cross_validation_with": [
        "phase3_market_analyzer",
        "signal_performance_tracker"
      ],
      "data_sources": [
        "standardized_technical_indicators",
        "volatility_regime_signals",
        "market_sentiment_data"
      ]
    },
    "enhanced_optimization_strategies": {
      "multi_dimensional_scoring": "綜合評分系統提升信號品質識別",
      "vectorized_signal_processing": "批次處理提升 70% 處理速度",
      "adaptive_quality_thresholds": "動態品質閾值適應市場條件",
      "intelligent_signal_filtering": "智能過濾避免信號冗餘和衝突",
      "layered_caching_strategy": {
        "signal_cache_30s": ["standardized_signals", "quality_scores"],
        "metadata_cache_60s": ["market_context", "risk_metrics"],
        "performance_cache_120s": ["historical_accuracy", "tier_statistics"]
      },
      "parallel_output_generation": "多格式並行輸出減少延遲",
      "real_time_performance_monitoring": "即時性能監控和自動優化",
      "memory_optimized_processing": "記憶體使用優化和垃圾回收"
    },
    "interface_compatibility": {
      "upstream_integration": {
        "receives_from": [
          "phase1b_volatility_adaptation_v2",
          "indicator_dependency_graph_v2"
        ],
        "format_expected": [
          "{symbol}_{timeframe}_volatility_regime",
          "{symbol}_{timeframe}_{indicator_name}"
        ],
        "requires_data_validation": "multi_source_signal_integrity"
      },
      "downstream_integration": {
        "provides_to": [
          "unified_signal_candidate_pool",
          "trading_execution_engine"
        ],
        "format_provided": "{symbol}_{timeframe}_{strategy}_{signal_type}",
        "quality_assurance": "multi_dimensional_quality_scoring"
      },
      "cross_module_validation": {
        "validates_with": "phase3_market_analyzer",
        "performance_tracking": "signal_performance_monitor",
        "real_time_monitoring": "standardization_accuracy_tracking"
      }
    }
  }
}
