{
  "PHASE1_SIGNAL_GENERATION_CONFLICT_RESOLUTION": {
    "解決方案版本": "1.0.0",
    "最後更新": "2025-08-06",
    "解決的衝突": "信號強度標準不統一 + 時間戳同步層級衝突 + Phase1A路由邏輯衝突",

    "🔧 衝突解決總結": {
      "1. 信號強度標準統一": {
        "問題": "Phase1A/1C使用0.0-1.0，Unified Pool仍用0-100",
        "解決": "強制所有模組統一使用 0.0-1.0 標準",
        "驗證": "在 unified_pool_v3 中增加格式驗證機制",
        "狀態": "✅ 已解決"
      },
      "2. 時間戳同步統一": {
        "問題": "多個獨立時間戳源造成同步衝突",
        "解決": "以 websocket_realtime_driver 為唯一主時間源",
        "標準": "100ms 統一容忍度（降低from 200ms）",
        "狀態": "✅ 已解決"
      },
      "3. Phase1A路由邏輯修正": {
        "問題": "Phase1A向indicator_dependency_graph路由造成循環依賴風險",
        "解決": "明確標記為「向下游傳遞」，避免循環依賴誤解",
        "數據流": "WebSocket → Phase1A → [Indicators, Phase1B] → Phase1C → Pool",
        "狀態": "✅ 已解決"
      }
    },

    "📋 標準化要求": {
      "信號強度範圍": "0.0-1.0 (所有模組統一標準)",
      "時間戳格式": "ISO_8601_UTC (websocket_realtime_driver 統一提供)",
      "品質分數範圍": "0.0-1.0 (統一評分標準)",
      "置信度範圍": "0.0-1.0 (標準化置信度)",
      "同步容忍度": "100ms (統一標準)"
    },

    "🔄 修正後的完整數據流": {
      "正確流程": [
        "WebSocket實時數據驅動 (主時間源)",
        "Phase1A基礎信號生成 (0.0-1.0標準)",
        "並行處理: [indicator_dependency_graph, phase1b_volatility_adaptation]",
        "Phase1C信號標準化 (統一格式)",
        "Unified Signal Pool v3.0 (格式驗證)",
        "Phase2 EPL前處理"
      ],
      "時間戳流": "websocket → phase1a → indicators/phase1b → phase1c → pool",
      "信號格式流": "原始數據 → 0.0-1.0標準化 → 品質評分 → 最終候選池"
    },

    "✅ 驗證檢查點": {
      "信號強度驗證": "所有模組輸出信號強度必須在 [0.0, 1.0] 範圍",
      "時間戳驗證": "所有信號時間戳與 websocket_realtime_driver 偏差 < 100ms",
      "格式驗證": "unified_pool_v3 入口處驗證所有輸入格式一致性",
      "依賴驗證": "確認無循環依賴，數據流向為單向",
      "性能驗證": "端到端延遲 < 180ms，極端市場 < 60ms"
    },

    "⚠️ 需要注意的實現細節": {
      "代碼更新": [
        "unified_signal_candidate_pool.py 中移除 0-100 範圍轉換",
        "所有 signal_strength * 100 轉換代碼需移除",
        "添加 0.0-1.0 範圍驗證邏輯"
      ],
      "配置更新": [
        "所有模組配置檔案確認時間戳源為 websocket_realtime_driver",
        "移除獨立的時間戳同步配置",
        "統一容忍度設定為 100ms"
      ],
      "測試驗證": [
        "端到端數據流測試",
        "極端市場快速通道測試",
        "信號格式一致性測試",
        "時間戳同步精度測試"
      ]
    }
  }
}
