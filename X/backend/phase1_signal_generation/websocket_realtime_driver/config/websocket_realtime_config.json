{
  "version": "1.0.0",
  "config_name": "WebSocket實時價格源配置",
  "description": "Binance WebSocket實時價格流與智能觸發系統",
  "last_updated": "2025-08-09T00:00:00Z",
  
  "websocket_driver": {
    "class_name": "WebSocketRealtimeDriver",
    "binance_config": {
      "base_url": "wss://stream.binance.com:9443/ws/",
      "symbols": ["BTCUSDT", "ETHUSDT", "ADAUSDT", "BNBUSDT", "SOLUSDT", "XRPUSDT", "DOGEUSDT"],
      "stream_type": "ticker",
      "reconnect_interval": 5,
      "max_reconnect_attempts": 10,
      "ping_interval": 20
    },
    "data_processing": {
      "price_precision": 8,
      "volume_precision": 4,
      "update_frequency_ms": 100,
      "memory_cache_size": 1000,
      "data_validation": true
    },
    "performance_targets": {
      "latency_ms": 50,
      "throughput_per_second": 1000,
      "memory_usage_mb": 100,
      "cpu_usage_percent": 5
    }
  },
  
  "intelligent_trigger": {
    "class_name": "IntelligentTriggerEngine",
    "trigger_conditions": {
      "price_change_1min": {
        "threshold_percent": 0.5,
        "priority": "HIGH",
        "enabled": true
      },
      "price_change_5min": {
        "threshold_percent": 2.0,
        "priority": "CRITICAL",
        "enabled": true
      },
      "rsi_extremes": {
        "oversold_threshold": 30,
        "overbought_threshold": 70,
        "priority": "MEDIUM",
        "enabled": true
      },
      "volume_spike": {
        "multiplier_threshold": 2.0,
        "priority": "HIGH",
        "enabled": true
      },
      "support_resistance_test": {
        "proximity_percent": 0.2,
        "priority": "MEDIUM",
        "enabled": true
      },
      "periodic_check": {
        "interval_minutes": 5,
        "priority": "LOW",
        "enabled": true
      }
    },
    "convergence_detection": {
      "required_indicators": 3,
      "indicator_weights": {
        "rsi": 0.25,
        "macd": 0.25,
        "bollinger": 0.20,
        "volume": 0.15,
        "support_resistance": 0.15
      },
      "convergence_threshold": 0.75
    },
    "win_rate_prediction": {
      "high_priority_threshold": 0.75,
      "observation_range": [0.40, 0.75],
      "minimum_sample_size": 50,
      "lookback_days": 30
    }
  },
  
  "auto_backtest": {
    "class_name": "AutoBacktestValidator",
    "validation_period_hours": 48,
    "sample_size": 100,
    "success_threshold": 0.70,
    "dynamic_threshold_adjustment": {
      "enabled": true,
      "adjustment_factor": 0.05,
      "min_threshold": 0.60,
      "max_threshold": 0.85
    },
    "backtesting_metrics": {
      "win_rate": "percentage",
      "profit_loss_ratio": "ratio",
      "max_drawdown": "percentage",
      "sharpe_ratio": "ratio",
      "total_trades": "count"
    }
  },
  
  "data_flow": {
    "input_sources": {
      "websocket_prices": "WebSocketRealtimeDriver",
      "technical_indicators": "pandas_ta",
      "historical_data": "binance_api"
    },
    "processing_pipeline": [
      "price_validation",
      "technical_analysis",
      "trigger_evaluation",
      "convergence_detection", 
      "win_rate_prediction",
      "signal_generation"
    ],
    "output_destinations": {
      "phase1_coordinator": "unified_signal_candidate_pool_v3",
      "monitoring_dashboard": "UnifiedMonitoringDashboard",
      "notification_system": "gmail_notification"
    }
  },
  
  "memory_management": {
    "price_cache_size": 5000,
    "indicator_cache_size": 1000,
    "history_retention_hours": 24,
    "cleanup_interval_minutes": 30,
    "memory_threshold_mb": 500
  },
  
  "error_handling": {
    "connection_retry_attempts": 5,
    "fallback_to_rest_api": true,
    "error_notification": true,
    "graceful_degradation": true,
    "recovery_strategies": [
      "reconnect_websocket",
      "switch_to_backup_stream",
      "use_cached_data",
      "fallback_to_rest_api"
    ]
  },
  
  "integration_points": {
    "phase1_main_coordinator": {
      "trigger_method": "intelligent_signal_trigger",
      "data_format": "unified_signal_candidate_pool_v3",
      "update_frequency": "real_time"
    },
    "unified_monitoring_dashboard": {
      "metrics_reporting": "real_time_websocket_metrics",
      "performance_monitoring": "trigger_engine_stats",
      "health_checks": "websocket_connection_health"
    },
    "existing_apis": {
      "compatibility_mode": "backward_compatible",
      "parallel_execution": true,
      "migration_strategy": "gradual_adoption"
    }
  },
  
  "performance_monitoring": {
    "realtime_metrics": {
      "websocket_latency": "milliseconds",
      "trigger_response_time": "milliseconds", 
      "signal_generation_rate": "per_second",
      "memory_usage": "megabytes",
      "cpu_usage": "percentage"
    },
    "alerting_thresholds": {
      "high_latency_ms": 200,
      "high_memory_mb": 300,
      "high_cpu_percent": 80,
      "connection_failure_rate": 0.05
    }
  }
}
