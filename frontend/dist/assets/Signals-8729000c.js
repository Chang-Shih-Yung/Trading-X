import{d as D,a as u,r as U,o as N,c as r,b as t,w as m,v as _,u as $,F as h,e as k,t as o,n as y,x as g,g as i,y as S}from"./vendor-1ea422f4.js";import{a as F}from"./index-afb7e6c7.js";const L={class:"container mx-auto px-4 py-8"},j={class:"bg-white rounded-lg shadow mb-6 p-6"},M={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},V={class:"bg-white rounded-lg shadow"},z={key:0,class:"p-8 text-center"},A={key:1,class:"p-8 text-center text-gray-500"},E={key:2,class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},I={class:"px-6 py-4 whitespace-nowrap"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex items-center"},Q={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},X={class:"text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},tt={class:"flex items-center"},et={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},st={class:"text-sm text-gray-900"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},nt=["onClick"],at={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},rt={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},it={class:"flex justify-between items-center mb-4"},dt={class:"grid grid-cols-2 gap-4 mb-4"},pt={class:"text-lg font-semibold"},xt={key:0,class:"mb-4"},ct={class:"text-sm text-gray-900 bg-gray-50 p-3 rounded"},ut={key:1,class:"mb-4"},mt={class:"flex flex-wrap gap-2"},yt={class:"flex justify-end"},wt=D({__name:"Signals",setup(gt){const p=u([]),x=u(!1),a=u(null),n=U({symbol:"",signalType:"",minConfidence:.7}),c=async()=>{x.value=!0;try{const l=new URLSearchParams;n.symbol&&l.append("symbol",n.symbol),n.signalType&&l.append("signal_type",n.signalType),n.minConfidence&&l.append("min_confidence",n.minConfidence.toString());const e=await F.get(`/api/v1/signals?${l.toString()}`);p.value=e.data}catch(l){console.error("獲取信號失敗:",l)}finally{x.value=!1}},f=l=>l==="LONG"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",C=l=>{switch(l){case"BUY":return"bg-green-100 text-green-800";case"SELL":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=l=>new Date(l).toLocaleString("zh-TW"),B=l=>{a.value=l};return N(()=>{c()}),(l,e)=>(i(),r("div",L,[e[19]||(e[19]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"交易信號"),t("p",{class:"text-gray-600"},"實時監控和管理交易信號")],-1)),t("div",j,[t("div",M,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"交易對",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.symbol=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},e[5]||(e[5]=[t("option",{value:""},"全部",-1),t("option",{value:"BTC/USDT"},"BTC/USDT",-1),t("option",{value:"ETH/USDT"},"ETH/USDT",-1),t("option",{value:"BNB/USDT"},"BNB/USDT",-1)]),512),[[_,n.symbol]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"信號類型",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.signalType=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},e[7]||(e[7]=[t("option",{value:""},"全部",-1),t("option",{value:"LONG"},"做多",-1),t("option",{value:"SHORT"},"做空",-1)]),512),[[_,n.signalType]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"最低置信度",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.minConfidence=s),type:"number",min:"0",max:"1",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,512),[[$,n.minConfidence]])]),t("div",{class:"flex items-end"},[t("button",{onClick:c,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700"}," 篩選 ")])])]),t("div",V,[t("div",{class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold text-gray-900"},"交易信號列表",-1)),t("button",{onClick:c,class:"bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700"}," 刷新 ")]),x.value?(i(),r("div",z,e[11]||(e[11]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"載入中...",-1)]))):p.value.length===0?(i(),r("div",A," 暫無信號數據 ")):(i(),r("div",E,[t("table",H,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"交易對"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"時間框架"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"方向"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"進場價格"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"止損"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"止盈"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"風險回報比"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"置信度"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"信號強度"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"創建時間"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"操作")])],-1)),t("tbody",O,[(i(!0),r(h,null,k(p.value,s=>{var d,b,v,w;return i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",G,o(s.symbol),1),t("td",R,o(s.timeframe),1),t("td",I,[t("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",f(s.signal_type)])},o(s.signal_type),3)]),t("td",P," $"+o(((d=s.entry_price)==null?void 0:d.toFixed(2))||"N/A"),1),t("td",W," $"+o(((b=s.stop_loss)==null?void 0:b.toFixed(2))||"N/A"),1),t("td",Y," $"+o(((v=s.take_profit)==null?void 0:v.toFixed(2))||"N/A"),1),t("td",q,o(((w=s.risk_reward_ratio)==null?void 0:w.toFixed(1))||"N/A")+":1 ",1),t("td",J,[t("div",K,[t("div",Q,[t("div",{class:"bg-blue-600 h-2 rounded-full",style:S(`width: ${s.confidence*100}%`)},null,4)]),t("span",X,o((s.confidence*100).toFixed(0))+"%",1)])]),t("td",Z,[t("div",tt,[t("div",et,[t("div",{class:"bg-green-600 h-2 rounded-full",style:S(`width: ${s.signal_strength}%`)},null,4)]),t("span",st,o(s.signal_strength.toFixed(0)),1)])]),t("td",lt,o(T(s.created_at)),1),t("td",ot,[t("button",{onClick:ft=>B(s),class:"text-blue-600 hover:text-blue-900 mr-2"}," 詳情 ",8,nt)])])}),128))])])]))]),a.value?(i(),r("div",at,[t("div",rt,[t("div",it,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900"},"信號詳情",-1)),t("button",{onClick:e[3]||(e[3]=s=>a.value=null),class:"text-gray-400 hover:text-gray-600"},e[13]||(e[13]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",dt,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"交易對",-1)),t("p",pt,o(a.value.symbol),1)]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"信號方向",-1)),t("span",{class:y(["inline-flex px-2 py-1 text-sm font-semibold rounded-full",f(a.value.signal_type)])},o(a.value.signal_type),3)])]),a.value.reasoning?(i(),r("div",xt,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"信號理由",-1)),t("p",ct,o(a.value.reasoning),1)])):g("",!0),a.value.indicators_used?(i(),r("div",ut,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"使用的指標",-1)),t("div",mt,[(i(!0),r(h,null,k(a.value.indicators_used,(s,d)=>(i(),r("span",{key:d,class:y(["px-2 py-1 text-xs rounded-full",C(s)])},o(d)+": "+o(s),3))),128))])])):g("",!0),t("div",yt,[t("button",{onClick:e[4]||(e[4]=s=>a.value=null),class:"bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400"}," 關閉 ")])])])):g("",!0)]))}});export{wt as default};
